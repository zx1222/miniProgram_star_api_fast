<!--pages/idolView/index.wxml-->
<view class="container {{is_post_show&&tabCurrent==2?'overflow-y-hidden':''}}">
      <view class="tab" style=" border-bottom: 1px solid {{idolTheme[idol_index].main}};">
            <text wx:for="{{tabArr}}" wx:key="{{index}}" data-index="{{index}}" bindtap="tapIndicator" class="indicator-item" style="color:{{tabCurrent === index? idolTheme[idol_index].main : '' }};">{{item}}</text>
            <view class="slider-line" style="transform: translateX({{tabCurrent * 100}}%);width:33.3%">
                  <view class='line-inner' style="background:{{idolTheme[idol_index].main}}"></view>
            </view>
      </view>

      <!--自我介绍 -->
      <view wx:if="{{tabCurrent==0}}" class='idol-intro flex  flex-c justify-content-betweem'>
            <!-- 自我介绍header -->
            <view class="header" style='border-bottom:1px dashed {{idolTheme[idol_index].main}};'>
                  <view class='desc-hd bold w100  italic' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].hd_desc}}</view>
                  <view class='flex jsutify-content-between'>
                        <view class='poster-wrp w100'>
                              <!-- video border theme-->
                              <image wx:if="{{idol_index==0}}" class='poster-border w100' src='../../images/idol-brief-inro_border1.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==1}}" class='poster-border w100' src='../../images/idol-brief-inro_border2.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==2}}" class='poster-border w100' src='../../images/idol-brief-inro_border3.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==3}}" class='poster-border w100' src='../../images/idol-brief-inro_border4.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==4}}" class='poster-border w100' src='../../images/idol-brief-inro_border5.png' mode='widthFix'></image>
                              <!-- video top icon theme---->
                              <image class='poster w100' src='../../images/poster-intro.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==0}}" src='../../images/idol-brief-inro_icon1.png' mode='widthFix' class='icon'></image>
                              <image wx:if="{{idol_index==1}}" src='../../images/idol-brief-inro_icon2.png' mode='widthFix' class='icon'></image>
                              <image wx:if="{{idol_index==2}}" src='../../images/idol-brief-inro_icon3.png' mode='widthFix' class='icon'></image>
                              <image wx:if="{{idol_index==3}}" src='../../images/idol-brief-inro_icon4.png' mode='widthFix' class='icon icon4'></image>
                              <image wx:if="{{idol_index==4}}" src='../../images/idol-brief-inro_icon5.png' mode='widthFix' class='icon'></image>
                        </view>
                        <view class='count-wrp'>
                              <view class='row w100'>
                                    <text class='label text-xs   bold'>人气值:</text>
                                    <text class='count italic bold' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].hot}}</text>
                              </view>
                              <view class='row w100'>
                                    <text class='label text-xs   bold'>粉丝数量:</text>
                                    <text class='count italic bold' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].fans}}</text>
                              </view>
                              <view class='row w100'>
                                    <text class='label text-xs   bold'>人气排名:</text>
                                    <text class='count italic bold' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].rank}}</text>
                              </view>

                              <view class='btn-wrp'>
                                    <button wx:if="{{idolInfo[idol_index].is_follow==2}}" class='btn-follow' style="box-shadow:0 0 1px {{idolTheme[idol_index].main}} inset;color:{{idolTheme[idol_index].main}}" catchtap='follow'>关注</button>
                                    <button wx:if="{{idolInfo[idol_index].is_follow==1}}" style="box-shadow:0 0 0 1px {{idolTheme[idol_index].main}} inset;color:{{idolTheme[idol_index].main}}" class='btn-follow'>已关注</button>
                                    <button class='btn-support text-white' style="background:{{idolTheme[idol_index].main}}" bindtap='turnToSupport'>应援</button>
                              </view>
                        </view>
                  </view>
            </view>
            <!-- 自我介绍形象 -->
            <view class="desc-image">
                  <image wx:if="{{idol_index==0}}" src='../../images/idol-brief-inro_bg1.png' class='bg' mode='widthFix'></image>
                  <image wx:if="{{idol_index==1}}" src='../../images/idol-brief-inro_bg2.png' class='bg' mode='widthFix'></image>
                  <image wx:if="{{idol_index==2}}" src='../../images/idol-brief-inro_bg3.png' class='bg' mode='widthFix'></image>
                  <image wx:if="{{idol_index==3}}" src='../../images/idol-brief-inro_bg4.png' class='bg' mode='widthFix'></image>
                  <image wx:if="{{idol_index==4}}" src='../../images/idol-brief-inro_bg5.png' class='bg' mode='widthFix'></image>

                  <image class='country' src='{{idolInfo[idol_index].country}}' mode='widthFix'></image>
                  <image class='idol w100' mode='widthFix' src='{{idolInfo[idol_index].image}}'></image>
                  <view class='info-list'>
                        <view class='item'>
                              <view class='l text-white' style='background:{{idolTheme[idol_index].main}}'>姓名</view>
                              <view class='r bold letter-sp2' style='color:{{idolTheme[idol_index].main}};box-shadow:0 0 0 1px  {{idolTheme[idol_index].main}} inset'>{{idolInfo[idol_index].short_name}}</view>
                        </view>
                        <view class='item'>
                              <view class='l text-white' style='background:{{idolTheme[idol_index].main}}'>生日</view>
                              <view class='r bold letter-sp2' style='color:{{idolTheme[idol_index].main}};box-shadow:0 0 0 1px  {{idolTheme[idol_index].main}} inset'>{{idolInfo[idol_index].birthdaty}}</view>
                        </view>
                        <view class='item'>
                              <view class='l text-white' style='background:{{idolTheme[idol_index].main}}'>年龄</view>
                              <view class='r bold letter-sp2' style='color:{{idolTheme[idol_index].main}};box-shadow:0 0 0 1px  {{idolTheme[idol_index].main}} inset'>{{idolInfo[idol_index].age}}</view>
                        </view>
                        <view class='item'>
                              <view class='l text-white' style='background:{{idolTheme[idol_index].main}}'>代表花</view>
                              <view class='r bold ' style='color:{{idolTheme[idol_index].main}} ;box-shadow:0 0 0 1px  {{idolTheme[idol_index].main}} inset'>{{idolInfo[idol_index].flower}}</view>
                        </view>
                  </view>
                  <view class='sub-desc text-s  letter-sp1 bold'>{{idolInfo[idol_index].sub_desc}}</view>
            </view>
      </view>

      <!--动态-->
      <view class="swiper-indicator">
      <text wx:for="{{indicatorArr}}" wx:key="{{index}}" data-index="{{index}}" bindtap="_tapIndicator" class="indicator-item" style="color:{{swiperCurrent === index? genderTheme.main : '' }};">{{item}}</text>
      <view class="slider-line" style="transform: translateX({{swiperCurrent * 100}}%);">
            <view class='line-inner' style="background:{{genderTheme.main}}"></view>
      </view>
</view>
      <view class="swiper">
  <swiper indicator-dots="false" vertical="{{vertical}}" autoplay="true" duration="500" interval='2000'  circular="{{circular}}" style="height:{{imgheights[current]}}rpx;" class="{{iphone_type=='iPhone X'?'pt60':''}}">
    <block wx:for='{{banner}}' wx:key="{{index}}">
      <navigator url="{{(tab_id!=6&&p_swiper==1)||(tab_id!=5&&p_swiper==2)?'/pages/videoView/index':'/pages/newsView/index'}}" hover-class='none'>
        <swiper-item>
          <image src="{{item.banner_url}}" data-id='{{index}}' class="slide-image" mode="widthFix" bindload="imageLoad" data-url="{{banner_path[index]}}?index={{index}}" />
        </swiper-item>
      </navigator>
    </block>
  </swiper>
  <view class="dots">
    <block wx:for="{{bannerArr}}" wx:key="unique">
      <view class="dot{{index == current ? ' active' : ''}}"></view>
    </block>
  </view>
</view>

<view wx:if="{{tab_id!=5&&p_swiper==1}}" class='list-wrp list-wrp-video '>
<block wx:for="{{list}}" wx:key="{{index}}" >
  <view class='item video-item' data-from='1'  data-id='{{item.id}}' bindtap='turnToViewVideo'>
    <view class='poster-wrp w100'>
      <image class='poster-border w100' src='https://star.t.miinno.net/star_img/video-border.png' mode='widthFix'></image>
      <image class='poster w100' src='{{item.cover_picture}}' mode='widthFix'></image>
    </view>
    <view class='video-info'>
      <view class='video-title bold text-overflow1'>{{item.title}}</view>
      <view class='flex align-items-center row justify-content-between'>
        <view class='flex'>
          <view wx:if="{{tab_id==0}}" class='tag text-pink'>{{mediaType[item.type-1]}}</view>
          <view class='date text-pink icon-ellipsis'>{{item.list_time}}</view>
        </view>
        <!-- <view>
          <text class="fa fa-ellipsis-v text-s"></text>
        </view> -->
      </view>
    </view>
  </view>
</block>
  <view class="weui-loadmore" wx:if="{{loading}}">
    <view class="weui-loading"></view>
    <view class="weui-loadmore__tips">正在加载</view>
  </view>

</view>


<!-- list news -->
<view wx:if="{{tab_id==5&&p_swiper==1}}" class='list-wrp list-wrp-news '>
  <view class='item news-item flex' wx:for="{{list}}" wx:key="{{index}}"  data-id='{{item.id}}'bindtap='todetail'>
    <view class='news-info flex'>
      <view class='news-title bold text-overflow2'>{{item.title}}</view>
      <view class='flex justify-content-between'>
        <view class='comment-count text-s'>
          <text class='icon icomoon icon-message'></text>
          <text>{{item.comment_count}}</text>
        </view>
        <view class='date'>{{item.list_time}}</view>
      </view>
    </view>
    <view class='poster-wrp '>
      <image class='poster-border w100' src='https://star.t.miinno.net/star_img/video-border.png' mode='widthFix'></image>
      <image class='poster w100' src='{{item.cover_picture}}' mode='widthFix'></image>
    </view>
  </view>
</view>


      <!-- 后援会 -->
      <view wx:if="{{tabCurrent==2}}" class='fnasClub'>
            <!-- 自我介绍header -->
            <view class="header" style='border-bottom:1px dashed {{idolTheme[idol_index].main}};'>
                  <view class='desc-hd bold w100  italic' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].hd_desc}}</view>
                  <view class='flex jsutify-content-between'>
                        <view class='poster-wrp w100'>
                              <!-- video border theme-->
                              <image wx:if="{{idol_index==0}}" class='poster-border w100' src='../../images/idol-brief-inro_border1.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==1}}" class='poster-border w100' src='../../images/idol-brief-inro_border2.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==2}}" class='poster-border w100' src='../../images/idol-brief-inro_border3.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==3}}" class='poster-border w100' src='../../images/idol-brief-inro_border4.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==4}}" class='poster-border w100' src='../../images/idol-brief-inro_border5.png' mode='widthFix'></image>
                              <!-- video top icon theme---->
                              <image class='poster w100' src='../../images/poster-intro.png' mode='widthFix'></image>
                              <image wx:if="{{idol_index==0}}" src='../../images/idol-brief-inro_icon1.png' mode='widthFix' class='icon'></image>
                              <image wx:if="{{idol_index==1}}" src='../../images/idol-brief-inro_icon2.png' mode='widthFix' class='icon'></image>
                              <image wx:if="{{idol_index==2}}" src='../../images/idol-brief-inro_icon3.png' mode='widthFix' class='icon'></image>
                              <image wx:if="{{idol_index==3}}" src='../../images/idol-brief-inro_icon4.png' mode='widthFix' class='icon icon4'></image>
                              <image wx:if="{{idol_index==4}}" src='../../images/idol-brief-inro_icon5.png' mode='widthFix' class='icon'></image>
                        </view>
                        <view class='count-wrp'>
                              <view class='row w100'>
                                    <text class='label text-xs  text-black bold'>人气值:</text>
                                    <text class='count italic bold' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].hot}}</text>
                              </view>
                              <view class='row w100'>
                                    <text class='label text-xs  text-black bold'>粉丝数量:</text>
                                    <text class='count italic bold' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].fans}}</text>
                              </view>
                              <view class='row w100'>
                                    <text class='label text-xs  text-black bold'>人气排名:</text>
                                    <text class='count italic bold' style="color:{{idolTheme[idol_index].main}}">{{idolInfo[idol_index].rank}}</text>
                              </view>

                              <view class='btn-wrp'>
                                    <button wx:if="{{idolInfo[idol_index].is_follow==2}}" class='btn-follow' style="box-shadow:0 0 1px {{idolTheme[idol_index].main}} inset;color:{{idolTheme[idol_index].main}}" catchtap='follow'>关注</button>
                                    <button wx:if="{{idolInfo[idol_index].is_follow==1}}" style="box-shadow:0 0 0 1px {{idolTheme[idol_index].main}} inset;color:{{idolTheme[idol_index].main}}" class='btn-follow'>已关注</button>
                                    <button class='btn-support text-white' style="background:{{idolTheme[idol_index].main}}" bindtap='turnToSupport'>应援</button>
                              </view>
                        </view>
                  </view>
            </view>
            <!-- 帖子列表 -->
            <view class='forum-list-wrp w100'>
                  <forum-p-list forum_list="{{forum_list}}"></forum-p-list>
                  <view class="weui-loadmore" wx:if="{{loading}}">
                        <view class="weui-loading"></view>
                        <view class="weui-loadmore__tips">正在加载</view>
                  </view>
            </view>
            <text class='btn-add fa fa-plus-circle' bindtap='choosePostType'></text>
      </view>
</view>


<!-- 关注成功popup -->
<view class="popup flex align-items-center justify-content-center" wx:if="{{is_show}}">
      <view class='poster text-white'>
            <view class='poster-inner flex flex-c justify-content-between' style="background:{{idolTheme[idol_index].main}}">
                  <view class='header text-center 100 letter-sp1'>
                        <view>关注成功！</view>
                        <view>您是第123456位粉丝</view>
                        <view class='btn-wrp flex justify-content-between'>
                              <view class='btn-audio'>{{this.data.list[idol_index].name}}对你说的悄悄话</view>
                              <view class='btn-support letter-sp2' style='color:{{idolTheme[idol_index].main}}' catchtap='turnToSupport'>为他应援</view>
                        </view>
                  </view>
                  <image src='../../images/follow-poster.png' class='poster-img w100' mode='widthFix'></image>
            </view>
      </view>
      <text class='text-s text-white tips'>长按图片进行保存，分享到朋友圈</text>
      <image bindtap='closePopup' class='btn-close' src='../../images/icon-close.png' mode='widthFix'></image>
</view>



<!-- 应援规则popup -->
<view class="popup support-rules flex align-items-center justify-content-center" wx:if="{{is_rules_show&&tabCurrent==2}}">
      <view class='poster text-white'>
            <scroll-view class='poster-inner flex flex-c justify-content-between' >
                  <view class='header' style='   border-bottom: 1px dashed {{idolTheme[idol_index].main}} '>
                        <view class='title text-black bold text-center'>应援规则</view>
                        <view class='text-black text-xs'>欢迎来到《战斗吧！歌姬》的世界，在这里你的各种行为都会为你的偶像获得人气值，并且自己也会获得个人积分的奖励（我才不会告诉你个人值能换取各种神秘的礼物呢）</view>
                  </view>
                  <view class='content text-xs'>
                        <view class='content_title bold'>具体的奖励规则如下</view>
                        <view class="section">
                              <view class='bold'>【必修任务-签到】</view>
                              <view>点击签到按钮，为歌姬增加5点人气值，为你增加5点贡献值，每天限量一次。</view>
                        </view>
                        <view class='section'>
                              <view class='bold'>【必修任务-签到】</view>
                              <view>点击签到按钮，为歌姬增加5点人气值，为你增加5点贡献值，每天限量一次。</view>
                        </view>
                        <view class='section'>
                              <view class='bold'>【互动任务-评论视频】</view>
                              <view>评论歌姬动态里面的发布视频内容(每天3个) ，为歌姬增加15点人气值，为你增加15点贡献值，每天限量一次。</view>
                        </view>

                        <view class='section'>
                              <view class='bold'>【互动任务-编辑文字分享视频】</view>
                              <view>分享歌姬动态里面的视频内容加上评论给微信好友/微信群（分享自己喜欢的歌姬的内容），为歌姬增加15点人气值，为你增加15点贡献值，每周限量一次。</view>
                        </view>
                           <view class='section'>
                              <view class='bold'>【互动任务-编辑文字分享视频】</view>
                              <view>分享歌姬动态里面的视频内容加上评论给微信好友/微信群（分享自己喜欢的歌姬的内容），为歌姬增加15点人气值，为你增加15点贡献值，每周限量一次。</view>
                        </view>
                           <view class='section'>
                              <view class='bold'>【互动任务-编辑文字分享视频】</view>
                              <view>分享歌姬动态里面的视频内容加上评论给微信好友/微信群（分享自己喜欢的歌姬的内容），为歌姬增加15点人气值，为你增加15点贡献值，每周限量一次。</view>
                        </view>

                  </view>
            </scroll-view>
      </view>
      <image bindtap='closePopup' class='btn-close' src='../../images/icon-close.png' mode='widthFix'></image>
</view>

<!-- 发布类型选择popup -->
<view class="popup post-type flex align-items-center justify-content-center" wx:if="{{false}}">
<view class='flex align-items-center'>
      <view class='btn-wrp'>
            <image class='icon' src='../../images/icon-text.png' mode='widthFix' bindtap='turnToPost' data-id='1'></image>
            <view class='text-white label bold'>文字</view>
      </view>
        <view class='btn-wrp'>
            <image class='icon'  src='../../images/icon-picture.png' mode='widthFix' bindtap='turnToPost' data-id='2'></image>
               <view class='text-white label bold'>相册</view>
      </view>
</view>

      <image bindtap='closePopup' class='btn-close' src='../../images/icon-close.png' mode='widthFix'></image>
</view>

<view class='popup unfollow flex align-items-center justify-content-center' wx:if="{{is_followcancel_show}}">
  <view class="toast-content {{gender==1?'popup-bg1':'popup-bg2'}}">
    <view class='title  text-center'>不再关注{{list[idol_index].nickname}}了么</view>
    <view class='btn-wrp flex align-items-center justify-content-center'>
      <view class='btn-confirm btn text-s' catchtap='catchConfirm'>是</view>
      <view class='btn-cancel btn text-s' style="color:{{genderTheme.main}}" catchtap='catchCancel'>否</view>
    </view>

  </view>

</view>

<forum wx:if="{{is_post_show}}" bind:submitForum='catchForumSubmit' bind:closeForum='catchForumClose' idolTheme="{{idolTheme[idol_index]}}"></forum>
